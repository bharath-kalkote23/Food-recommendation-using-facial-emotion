{% extends "base.html" %}
{% block content %}
<div class="card">
  <h2 class="text-xl font-semibold mb-4">Reserve a Table</h2>
  <form id="resForm" class="grid md:grid-cols-2 gap-3">
    <input name="name" class="border rounded p-2" placeholder="Your name" required>
    <input name="phone" class="border rounded p-2" placeholder="Phone" required>
    <input name="date" type="date" class="border rounded p-2" required>
    <input name="time" type="time" class="border rounded p-2" required>
    <input name="size" type="number" class="border rounded p-2" placeholder="Party size" min="1" value="2" required>
    <button class="rounded-2xl shadow px-4 py-2 bg-black text-white">Book</button>
  </form>
  <p id="msg" class="mt-3 text-green-700"></p>
</div>
<script>
document.getElementById('resForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const form = new FormData(e.target);
  const payload = Object.fromEntries(form.entries());
  const res = await fetch('/api/reserve', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload) });
  const data = await res.json();
  document.getElementById('msg').textContent = data.message || 'Booked!';
  e.target.reset();
});
</script>
{% endblock %}